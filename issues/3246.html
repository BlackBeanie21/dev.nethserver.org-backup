<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Enhancement #3246: Upgrade SSL/TLS defaults on 6.7 - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" name="csrf-token" />
<link rel='shortcut icon' href='/favicon.ico?1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057" media="all" rel="stylesheet" type="text/css" />
<link href="../stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver../javascripts/theme.js%3F1403512057" type="text/javascript"></script>
<link href="/plugin_assets/openid_fix../stylesheets/openid.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/3246.atom" rel="alternate" title="NethServer 6 - Enhancement #3246: Upgrade SSL/TLS defaults on 6.7" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="/login" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="/" class="home">Home</a></li>
<li><a href="/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    <div id="quick-search">
        <form accept-charset="UTF-8" action="/projects/nethserver/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="/projects/nethserver/search" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
</form>        
    </div>

    <h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>
<li><a href="/projects/nethserver/activity" class="activity">Activity</a></li>
<li><a href="/projects/nethserver/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="/projects/nethserver/issues" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki" class="wiki">Wiki</a></li>
<li><a href="/projects/nethserver/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/nethserver/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/nethserver/issues/report">Summary</a></li>

</ul>




<h3>Custom queries</h3>
<ul class="queries"><li><a href="/projects/nethserver/issues?query_id=60" class="query">6.6 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=64" class="query">6.7 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=65" class="query">6.8 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=66" class="query">6.9 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=12" class="query">@future/closed</a></li>
<li><a href="/projects/nethserver/issues?query_id=55" class="query">KNOWN_BUGS</a></li>
<li><a href="/projects/nethserver/issues?query_id=15" class="query">Lost+Found</a></li>
<li><a href="/projects/nethserver/issues?query_id=24" class="query">NEEDINFO</a></li>
<li><a href="/projects/nethserver/issues?query_id=26" class="query">ON_DEV</a></li>
<li><a href="/projects/nethserver/issues?query_id=27" class="query">ON_QA</a></li>
<li><a href="/projects/nethserver/issues?query_id=44" class="query">TODO Tasks</a></li>
<li><a href="/projects/nethserver/issues?query_id=54" class="query selected">UPDATES</a></li>
<li><a href="/projects/nethserver/issues?query_id=67" class="query">v6.10 (current)</a></li></ul>





        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Enhancement #3246</h2>

<div class="issue tracker-6 status-5 priority-4 priority-default closed details">
    <div class="next-prev-links contextual">
      <a href="/issues/3258" title="#3258">« Previous</a> |
      <a href="/issues/3260" title="#3260">Next »</a>
    </div>

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Upgrade SSL/TLS defaults on 6.7</h3></div>
</div>
        <p class="author">
        Added by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2015-08-27" title="08/27/2015 04:12 AM">almost 6 years</a> ago.
        Updated <a href="/projects/nethserver/activity?from=2015-09-24" title="09/24/2015 09:26 AM">almost 6 years</a> ago.
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">&lt;multiple packages&gt;</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="/versions/213">v6.7-rc1</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Check SSL/TLS settings, upgrading security options to upstream defaults.</p>
  </div>
</div>





<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form>
<table class="list issues">
  <tr class="issue hascontextmenu" id="relation-747">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2921" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="/issues/2921" class="issue tracker-1 status-5 priority-5 priority-high3 closed">Bug #2921</a>: Protection against POODLE SSLv3 Vulnerability
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
</table>
</form>

<form accept-charset="UTF-8" action="/issues/3246/relations" class="new_relation" data-remote="true" id="new-relation-form" method="post" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates" selected="selected">Related to</option>
<option value="duplicates">Duplicates</option>
<option value="duplicated">Duplicated by</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script type="text/javascript">
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?project_id=nethserver&scope=all')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-httpd/revisions/a1d012b360f81e30d57259a4852115d658870818" title="Revision a1d012b3">Revision a1d012b3</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-09-08" title="09/08/2015 09:39 AM">almost 6 years</a> ago</span></p>
    <div class="wiki">
        <p>Stronger SSL configuration. Refs <a href="/issues/3246" class="issue tracker-6 status-5 priority-4 priority-default closed" title="Upgrade SSL/TLS defaults on 6.7 (CLOSED)">#3246</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-httpd-admin/revisions/946d56fc03f95ae50c46747efbe22a8257a4afd4" title="Revision 946d56fc">Revision 946d56fc</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-09-08" title="09/08/2015 09:57 AM">almost 6 years</a> ago</span></p>
    <div class="wiki">
        <p>Stronger SSL configuration. Refs <a href="/issues/3246" class="issue tracker-6 status-5 priority-4 priority-default closed" title="Upgrade SSL/TLS defaults on 6.7 (CLOSED)">#3246</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-16111" class="journal has-details">
    <div id="note-1">
    <h4><a href="/issues/3246#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2015-08-27" title="08/27/2015 06:54 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Related to</strong> <i><a href="/issues/2921" class="issue tracker-1 status-5 priority-5 priority-high3 closed">Bug #2921</a>: Protection against POODLE SSLv3 Vulnerability</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-16113" class="journal has-notes">
    <div id="note-2">
    <h4><a href="/issues/3246#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2015-08-27" title="08/27/2015 08:20 AM">almost 6 years</a> ago</h4>

    <div class="wiki" id="journal-16113-notes"><p>The <code>mod_ssl</code> package owns <code>/etc/httpd/conf.d/ssl.conf</code>. This is the default (comments removed):<pre>
LoadModule ssl_module modules/mod_ssl.so

Listen 443

SSLPassPhraseDialog  builtin

SSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)
SSLSessionCacheTimeout  300

SSLMutex default

SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin

SSLCryptoDevice builtin

&lt;VirtualHost _default_:443&gt;

ErrorLog logs/ssl_error_log
TransferLog logs/ssl_access_log
LogLevel warn

SSLEngine on

SSLProtocol all -SSLv2

SSLCipherSuite DEFAULT:!EXP:!SSLv2:!DES:!IDEA:!SEED:+3DES

SSLCertificateFile /etc/pki/tls/certs/localhost.crt

SSLCertificateKeyFile /etc/pki/tls/private/localhost.key

&lt;Files ~ "\.(cgi|shtml|phtml|php3?)$"&gt;
    SSLOptions +StdEnvVars
&lt;/Files&gt;
&lt;Directory "/var/www/cgi-bin"&gt;
    SSLOptions +StdEnvVars
&lt;/Directory&gt;

SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b" 

&lt;/VirtualHost&gt;    
</pre></p>


	<p>Notes/differences</p>


	<ul>
	<li><code>SSLMutex default (none)</code> <br />  > This is the default where no Mutex is used at all. Use it at your own risk. But because currently the Mutex is mainly used for synchronizing write access to the SSL Session Cache you can live without it as long as you accept a sometimes garbled Session Cache. So it's not recommended to leave this the default. Instead configure a real Mutex. We have a </li>
		<li><code>SSLProtocol all -SSLv2 (all)</code><br />  SSLv2 is disabled by upstream. We also disable <code>SSLv3</code> since <a href="/issues/2921">POODLE</a></li>
		<li><code>SSLCipherSuite DEFAULT:!EXP:!SSLv2:!DES:!IDEA:!SEED:+3DES (ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP)</code><br />  > The default mod_ssl configuration no longer enables support for SSL cipher suites using the single DES, IDEA, or SEED encryption algorithms.<br />  See <a href="https://access.redhat.com/errata/RHSA-2015:1249" class="external">RHSA-2015:1249</a> and <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1086771" class="external">BZ#1086771</a></li>
	</ul>


	<p>By applying the new upstream default we'll have the following changes:<pre><code class="diff syntaxhl"><span class="CodeRay"><span class="line comment">[root@vm9 ~]# diff -u ciphers.ns ciphers.centos</span>
<span class="line head"><span class="head">--- </span><span class="filename">ciphers.ns    2015-08-27 12:18:26.046113207 +0000</span></span>
<span class="line head"><span class="head">+++ </span><span class="filename">ciphers.centos    2015-08-27 12:18:15.167094542 +0000</span></span>
<span class="line change"><span class="change">@@</span> -6,7 +6,6 <span class="change">@@</span></span>
 AES256-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(256)  Mac=SHA1
 CAMELLIA128-SHA         SSLv3 Kx=RSA      Au=RSA  Enc=Camellia(128) Mac=SHA1
 CAMELLIA256-SHA         SSLv3 Kx=RSA      Au=RSA  Enc=Camellia(256) Mac=SHA1
<span class="line delete"><span class="delete">-</span>DES-CBC3-MD5            SSLv2 Kx=RSA      Au=RSA  Enc=3DES(168) Mac=MD5 </span>
 DES-CBC3-SHA            SSLv3 Kx=RSA      Au=RSA  Enc=3DES(168) Mac=SHA1
 DHE-DSS-AES128-GCM-SHA256 TLSv1.2 Kx=DH       Au=DSS  Enc=AESGCM(128) Mac=AEAD
 DHE-DSS-AES128-SHA256   TLSv1.2 Kx=DH       Au=DSS  Enc=AES(128)  Mac=SHA256
<span class="line change"><span class="change">@@</span> -16,7 +15,6 <span class="change">@@</span></span>
 DHE-DSS-AES256-SHA      SSLv3 Kx=DH       Au=DSS  Enc=AES(256)  Mac=SHA1
 DHE-DSS-CAMELLIA128-SHA SSLv3 Kx=DH       Au=DSS  Enc=Camellia(128) Mac=SHA1
 DHE-DSS-CAMELLIA256-SHA SSLv3 Kx=DH       Au=DSS  Enc=Camellia(256) Mac=SHA1
<span class="line delete"><span class="delete">-</span>DHE-DSS-SEED-SHA        SSLv3 Kx=DH       Au=DSS  Enc=SEED(128) Mac=SHA1</span>
 DHE-RSA-AES128-GCM-SHA256 TLSv1.2 Kx=DH       Au=RSA  Enc=AESGCM(128) Mac=AEAD
 DHE-RSA-AES128-SHA256   TLSv1.2 Kx=DH       Au=RSA  Enc=AES(128)  Mac=SHA256
 DHE-RSA-AES128-SHA      SSLv3 Kx=DH       Au=RSA  Enc=AES(128)  Mac=SHA1
<span class="line change"><span class="change">@@</span> -25,7 +23,6 <span class="change">@@</span></span>
 DHE-RSA-AES256-SHA      SSLv3 Kx=DH       Au=RSA  Enc=AES(256)  Mac=SHA1
 DHE-RSA-CAMELLIA128-SHA SSLv3 Kx=DH       Au=RSA  Enc=Camellia(128) Mac=SHA1
 DHE-RSA-CAMELLIA256-SHA SSLv3 Kx=DH       Au=RSA  Enc=Camellia(256) Mac=SHA1
<span class="line delete"><span class="delete">-</span>DHE-RSA-SEED-SHA        SSLv3 Kx=DH       Au=RSA  Enc=SEED(128) Mac=SHA1</span>
 ECDH-ECDSA-AES128-GCM-SHA256 TLSv1.2 Kx=ECDH/ECDSA Au=ECDH Enc=AESGCM(128) Mac=AEAD
 ECDH-ECDSA-AES128-SHA256 TLSv1.2 Kx=ECDH/ECDSA Au=ECDH Enc=AES(128)  Mac=SHA256
 ECDH-ECDSA-AES128-SHA   SSLv3 Kx=ECDH/ECDSA Au=ECDH Enc=AES(128)  Mac=SHA1
<span class="line change"><span class="change">@@</span> -60,20 +57,13 <span class="change">@@</span></span>
 ECDH-RSA-RC4-SHA        SSLv3 Kx=ECDH/RSA Au=ECDH Enc=RC4(128)  Mac=SHA1
 EDH-DSS-DES-CBC3-SHA    SSLv3 Kx=DH       Au=DSS  Enc=3DES(168) Mac=SHA1
 EDH-RSA-DES-CBC3-SHA    SSLv3 Kx=DH       Au=RSA  Enc=3DES(168) Mac=SHA1
<span class="line delete"><span class="delete">-</span>IDEA-CBC-MD5            SSLv2 Kx=RSA      Au=RSA  Enc=IDEA(128) Mac=MD5 </span>
<span class="line delete"><span class="delete">-</span>IDEA-CBC-SHA            SSLv3 Kx=RSA      Au=RSA  Enc=IDEA(128) Mac=SHA1</span>
 KRB5-DES-CBC3-MD5       SSLv3 Kx=KRB5     Au=KRB5 Enc=3DES(168) Mac=MD5 
 KRB5-DES-CBC3-SHA       SSLv3 Kx=KRB5     Au=KRB5 Enc=3DES(168) Mac=SHA1
<span class="line delete"><span class="delete">-</span>KRB5-IDEA-CBC-MD5       SSLv3 Kx=KRB5     Au=KRB5 Enc=IDEA(128) Mac=MD5 </span>
<span class="line delete"><span class="delete">-</span>KRB5-IDEA-CBC-SHA       SSLv3 Kx=KRB5     Au=KRB5 Enc=IDEA(128) Mac=SHA1</span>
 KRB5-RC4-MD5            SSLv3 Kx=KRB5     Au=KRB5 Enc=RC4(128)  Mac=MD5 
 KRB5-RC4-SHA            SSLv3 Kx=KRB5     Au=KRB5 Enc=RC4(128)  Mac=SHA1
 PSK-3DES-EDE-CBC-SHA    SSLv3 Kx=PSK      Au=PSK  Enc=3DES(168) Mac=SHA1
 PSK-AES128-CBC-SHA      SSLv3 Kx=PSK      Au=PSK  Enc=AES(128)  Mac=SHA1
 PSK-AES256-CBC-SHA      SSLv3 Kx=PSK      Au=PSK  Enc=AES(256)  Mac=SHA1
 PSK-RC4-SHA             SSLv3 Kx=PSK      Au=PSK  Enc=RC4(128)  Mac=SHA1
<span class="line delete"><span class="delete">-</span>RC2-CBC-MD5             SSLv2 Kx=RSA      Au=RSA  Enc=RC2(128)  Mac=MD5 </span>
<span class="line delete"><span class="delete">-</span>RC4-MD5                 SSLv2 Kx=RSA      Au=RSA  Enc=RC4(128)  Mac=MD5 </span>
 RC4-MD5                 SSLv3 Kx=RSA      Au=RSA  Enc=RC4(128)  Mac=MD5 
 RC4-SHA                 SSLv3 Kx=RSA      Au=RSA  Enc=RC4(128)  Mac=SHA1
<span class="line delete"><span class="delete">-</span>SEED-SHA                SSLv3 Kx=RSA      Au=RSA  Enc=SEED(128) Mac=SHA1</span>
</span></code></pre></p>


	<p>I suggest to forcibly migrate from the old to the new default, by adding a migration fragment.</p></div>
    </div>
  </div>
  
  <div id="change-16153" class="journal has-details">
    <div id="note-3">
    <h4><a href="/issues/3246#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-09-08" title="09/08/2015 09:38 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-16154" class="journal has-details">
    <div id="note-4">
    <h4><a href="/issues/3246#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-09-08" title="09/08/2015 10:03 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-16155" class="journal has-notes has-details">
    <div id="note-5">
    <h4><a href="/issues/3246#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-09-08" title="09/08/2015 10:10 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-16155-notes">Packages in 6.7/nethserver-testing:
	<ul>
	<li>nethserver-httpd-2.4.2-1.1.ga1d012b.ns6.noarch.rpm</li>
		<li>nethserver-httpd-admin-1.5.0-1.1.g946d56f.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 1</strong>
	<ul>
	<li>Install old nethserver-httpd package</li>
		<li>Execute the attached script (see below) against httpd on port 443 and save the result on a file. Example:<br /><pre>
sh test 443 &gt; old
</pre></li>
		<li>Update the package and execute the test again:<br /><pre>
sh test 443 &gt; new
</pre></li>
		<li>Look at the differences between two files, at least the following ciphers should not be present inside the new file:
	<ul>
	<li>DHE-RSA-SEED-SHA</li>
		<li>SEED-SHA</li>
		<li>IDEA-CBC-SHA</li>
	</ul></li>
	</ul>


<strong>Test case 2</strong>
	<ul>
	<li>Repeat the test case 1 against httpd-admin server, port 980: <code>sh test 980</code></li>
	</ul>


	<p><strong>Script for cipher testing</strong></p>


	<p>Cut and paste following lines inside a inside a text file called <code>test</code>.</p>


<pre>
#!/usr/bin/env bash

port=$1

# OpenSSL requires the port number.
SERVER=127.0.0.1:$1
DELAY=0.4
ciphers=$(openssl ciphers 'ALL:eNULL' | sed -e 's/:/ /g')

for cipher in ${ciphers[@]}
do
result=$(echo -n | openssl s_client -cipher "$cipher" -connect $SERVER 2&gt;&#38;1)
if [[ "$result" =~ ":error:" ]] ; then
  true
else
  if [[ "$result" =~ "Cipher is ${cipher}" || "$result" =~ "Cipher    :" ]] ; then
    echo $cipher
  else
    echo UNKNOWN RESPONSE
    echo $result
  fi
fi
sleep $DELAY
done

</pre></div>
    </div>
  </div>
  
  <div id="change-16190" class="journal has-details">
    <div id="note-6">
    <h4><a href="/issues/3246#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a51a6d0dfe89fa5bf19f241d5cdebc5e?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/326" class="user active">dz0 0te</a> <a href="/projects/nethserver/activity?from=2015-09-10" title="09/10/2015 06:40 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>dz0 0te</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-16191" class="journal has-notes has-details">
    <div id="note-7">
    <h4><a href="/issues/3246#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a51a6d0dfe89fa5bf19f241d5cdebc5e?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/326" class="user active">dz0 0te</a> <a href="/projects/nethserver/activity?from=2015-09-10" title="09/10/2015 06:48 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>dz0 0te</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    <div class="wiki" id="journal-16191-notes"><p><ins>System and  Package Version installed</ins><br />VM KVM - Clean install of Nethserver 6.7b1 fully updated<br />Package Installed:  nethserver-httpd-2.4.2-1.ns6.noarch<br />                    nethserver-httpd-admin-1.5.0-1.ns6.noarch<br />Other Package installed:  FTP server,File server,Web server</p>


	<p><ins>Test Original Problem</ins><br />Enhancement</p>


	<p><ins>Install Updated Package</ins><br /><pre>
yum --enablerepo=nethserver-testing update nethserver-httpd-2.4.2-1.1.ga1d012b.ns6  nethserver-httpd-admin-1.5.0-1.1.g946d56f.ns6
</pre></p>


<ins>Test Results after install</ins><br />Test case 1:
	<ol>
	<li>diff old new<br /><pre>
19d18
&lt; DHE-RSA-SEED-SHA
25d23
&lt; SEED-SHA
28d25
&lt; IDEA-CBC-SHA
</pre></li>
	</ol>


Test case 2:
	<ol>
	<li>diff old_980 new_980 <br /><pre>
19d18
&lt; DHE-RSA-SEED-SHA
25d23
&lt; SEED-SHA
28d25
&lt; IDEA-CBC-SHA
</pre></li>
	</ol>


	<p><ins>Verified or Reopen</ins><br />Verified</p>


	<p><ins>Note</ins><br />...</p></div>
    </div>
  </div>
  
  <div id="change-16258" class="journal has-notes has-details">
    <div id="note-8">
    <h4><a href="/issues/3246#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2015-09-24" title="09/24/2015 09:26 AM">almost 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-16258-notes"><p><strong>CLOSED</strong></p>


	<p>In nethserver-base/6.7<br />nethserver-httpd-2.5.0-1.ns6.noarch.rpm<br />nethserver-httpd-admin-1.6.0-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>

<p class="other-formats">Also available in:  <span><a href="/issues/3246.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="/issues/3246.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>



<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright © 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
