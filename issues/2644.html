<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Feature #2644: Allow to specify a port range in firewall rules - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" name="csrf-token" />
<link rel='shortcut icon' href='/favicon.ico?1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057" media="all" rel="stylesheet" type="text/css" />
<link href="../stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver../javascripts/theme.js%3F1403512057" type="text/javascript"></script>
<link href="/plugin_assets/openid_fix../stylesheets/openid.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/2644.atom" rel="alternate" title="NethServer 6 - Feature #2644: Allow to specify a port range in firewall rules" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="/login" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="/" class="home">Home</a></li>
<li><a href="/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    <div id="quick-search">
        <form accept-charset="UTF-8" action="/projects/nethserver/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="/projects/nethserver/search" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
</form>        
    </div>

    <h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>
<li><a href="/projects/nethserver/activity" class="activity">Activity</a></li>
<li><a href="/projects/nethserver/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="/projects/nethserver/issues" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki" class="wiki">Wiki</a></li>
<li><a href="/projects/nethserver/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/nethserver/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/nethserver/issues/report">Summary</a></li>

</ul>




<h3>Custom queries</h3>
<ul class="queries"><li><a href="/projects/nethserver/issues?query_id=60" class="query">6.6 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=64" class="query">6.7 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=65" class="query">6.8 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=66" class="query">6.9 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=12" class="query">@future/closed</a></li>
<li><a href="/projects/nethserver/issues?query_id=55" class="query">KNOWN_BUGS</a></li>
<li><a href="/projects/nethserver/issues?query_id=15" class="query">Lost+Found</a></li>
<li><a href="/projects/nethserver/issues?query_id=24" class="query">NEEDINFO</a></li>
<li><a href="/projects/nethserver/issues?query_id=26" class="query">ON_DEV</a></li>
<li><a href="/projects/nethserver/issues?query_id=27" class="query">ON_QA</a></li>
<li><a href="/projects/nethserver/issues?query_id=44" class="query">TODO Tasks</a></li>
<li><a href="/projects/nethserver/issues?query_id=54" class="query selected">UPDATES</a></li>
<li><a href="/projects/nethserver/issues?query_id=67" class="query">v6.10 (current)</a></li></ul>





        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #2644</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/8bfd5e35595c8281b27ad67a513ef559?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Allow to specify a port range in firewall rules</h3></div>
</div>
        <p class="author">
        Added by <a href="/users/14" class="user active">Stefano Fancello</a> <a href="/projects/nethserver/activity?from=2014-02-04" title="02/04/2014 09:42 AM">over 7 years</a> ago.
        Updated <a href="/projects/nethserver/activity?from=2014-02-26" title="02/26/2014 03:32 PM">over 7 years</a> ago.
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-firewall-base</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="/versions/198">v6.5-rc1</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Now when a package needs to open ports in firewall, can specify them in configuration db. But is not possible to specify port ranges.<br />For example, asterisk needs to open UDP ports from 10000 to 20000 to allow RTP data stream.<br />The only way to do this is to create a template for default firewall and for shorewall, but isn't correct that a package has to take care of what firewall is installed, it would be better to implement this at system level, with an interface that allow packages to specify port ranges in db like:<br /><pre>
UDPPorts=5060,4569,10000-20000,5036
</pre><br />The previous line should create rules to open ports 5060,4569,5036 (it is like this right now) <strong>AND</strong> ports from 10000 to 20000</p>
  </div>
</div>






</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/cbacb3a27d5b764152d8dce7afba5d47d0e752b3" title="Revision cbacb3a2">Revision cbacb3a2</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 04:37 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>system-config-firewall: add support for services with port range. Refs <a href="/issues/2644" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Allow to specify a port range in firewall rules (CLOSED)">#2644</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/413a6bd970118069d82e100b19c294f101d8c1d4" title="Revision 413a6bd9">Revision 413a6bd9</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 04:38 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>rules template: add support for services with port range. Refs <a href="/issues/2644" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Allow to specify a port range in firewall rules (CLOSED)">#2644</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/5bfa48ca6b9a317688e406bb3d232753ab54817a" title="Revision 5bfa48ca">Revision 5bfa48ca</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 04:53 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>rules template: support port range from local network. Refs <a href="/issues/2644" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Allow to specify a port range in firewall rules (CLOSED)">#2644</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/1f79eea81e3d9630fd5bba02b8090d41fead9090" title="Revision 1f79eea8">Revision 1f79eea8</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-11" title="02/11/2014 08:47 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>system-config-firewall: revert to cbacb3a27d5b764152d8dce7afba5d47d0e752b3. Refs <a href="/issues/2644" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Allow to specify a port range in firewall rules (CLOSED)">#2644</a></p>


	<p>Current template already support port ranges.</p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/516934f6446d5442246f06ec1c685ddafc200430" title="Revision 516934f6">Revision 516934f6</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-11" title="02/11/2014 08:58 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>/etc/shorewall/rules template: use port range syntax. Refs <a href="/issues/2644" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Allow to specify a port range in firewall rules (CLOSED)">#2644</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-10390" class="journal has-details">
    <div id="note-1">
    <h4><a href="/issues/2644#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-02-04" title="02/04/2014 03:07 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Target version</strong> set to <i>v6.5-rc1</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10467" class="journal has-notes has-details">
    <div id="note-2">
    <h4><a href="/issues/2644#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 03:33 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-10467-notes"><p>It must be implemented in lokkit and shorewall configuration.</p></div>
    </div>
  </div>
  
  <div id="change-10468" class="journal has-details">
    <div id="note-3">
    <h4><a href="/issues/2644#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 03:33 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10469" class="journal has-details">
    <div id="note-4">
    <h4><a href="/issues/2644#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 04:39 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10470" class="journal has-notes has-details">
    <div id="note-5">
    <h4><a href="/issues/2644#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 04:56 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-10470-notes">Packages in nethserver-testing:
	<ul>
	<li>nethserver-firewall-base-1.0.9-2.0git5bfa48ca.ns6.noarch.rpm</li>
		<li>nethserver-base-2.0.0-2.0gitcbacb3a2.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 1</strong>
	<ul>
	<li>Create a clean machine <em>without</em> nethserver-firewall-base installed</li>
		<li>Create two test services with port range and port list<br /><pre>
config set test service UDPPorts 10000-20000 TCPPorts 1111-1122 status enabled access private
config set test1 service UDPPorts 122,123 TCPPorts 124,125 status enabled access private
</pre></li>
		<li>Execute <code>signal-event firewall-adjust</code></li>
		<li>Check all ports are enabled in <code>/etc/sysconfig/system-config-firewall</code></li>
		<li>Check all ports are enabled in iptables: <code>iptables -nvL | less</code></li>
	</ul>


<strong>Test case 2</strong>
	<ul>
	<li>Install nethserver-firewall-base and configure a red interface</li>
		<li> Create two test services with port range and port list<br /><pre>
config set test service UDPPorts 10000-20000 TCPPorts 1111-1122 status enabled access public
config set test1 service UDPPorts 122,123 TCPPorts 124,125 status enabled access private
</pre></li>
		<li>Execute <code>signal-event firewall-adjust</code></li>
		<li>Check all ports are enabled in <code>/etc/shorewall/rules</code></li>
		<li>Check all ports (from local and external network) are enabled in iptables: <code>iptables -nvL | less</code></li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-10473" class="journal has-details">
    <div id="note-6">
    <h4><a href="/issues/2644#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 06:31 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Description</strong> updated (<a href="/journals/diff/10473?detail_id=16480" title="View differences">diff</a>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10474" class="journal has-notes has-details">
    <div id="note-7">
    <h4><a href="/issues/2644#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-10" title="02/10/2014 06:38 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>TRIAGED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-10474-notes"><p>Actual implementation allows only property in the form with commas or dash, not the sum of both as reported in description.<br />If possible use lokkit and shorewall range syntax.</p></div>
    </div>
  </div>
  
  <div id="change-10476" class="journal has-details">
    <div id="note-8">
    <h4><a href="/issues/2644#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-11" title="02/11/2014 09:13 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10477" class="journal has-notes has-details">
    <div id="note-9">
    <h4><a href="/issues/2644#note-9" class="journal-link">#9</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-11" title="02/11/2014 09:14 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-10477-notes"><p>New implementation is now using range port syntax for lokkit and Shorewall.</p></div>
    </div>
  </div>
  
  <div id="change-10478" class="journal has-notes has-details">
    <div id="note-10">
    <h4><a href="/issues/2644#note-10" class="journal-link">#10</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-02-11" title="02/11/2014 09:16 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-10478-notes">Packages in nethserver-testing:
	<ul>
	<li>nethserver-firewall-base-1.0.9-3.0git516934f6.ns6.noarch.rpm</li>
		<li>nethserver-base-2.0.0-5.0git1f79eea8.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 1</strong>
	<ul>
	<li>Create a clean machine <em>without</em> nethserver-firewall-base installed</li>
		<li>Create two test services with port range and port list<br /><pre>
config set test service UDPPorts 100,10000-20000,200 TCPPorts 300,1111-1122 status enabled access private
</pre></li>
		<li>Execute <code>signal-event firewall-adjust</code></li>
		<li>Check all ports are enabled in <code>/etc/sysconfig/system-config-firewall</code></li>
		<li>Check all ports are enabled in iptables: <code>iptables -nvL | less</code></li>
	</ul>


<strong>Test case 2</strong>
	<ul>
	<li>Install nethserver-firewall-base and configure a red interface</li>
		<li> Create two test services with port range and port list<br /><pre>
config set test service UDPPorts 100,10000-20000,200 TCPPorts 300,1111-1122 status enabled access public
</pre></li>
		<li>Execute <code>signal-event firewall-adjust</code></li>
		<li>Check all ports are enabled in <code>/etc/shorewall/rules</code></li>
		<li>Check all ports (from local and external network) are enabled in iptables: <code>iptables -nvL | less</code></li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-10604" class="journal has-details">
    <div id="note-11">
    <h4><a href="/issues/2644#note-11" class="journal-link">#11</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-02-20" title="02/20/2014 12:49 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Alessio Fattorini</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10605" class="journal has-notes">
    <div id="note-12">
    <h4><a href="/issues/2644#note-12" class="journal-link">#12</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-02-20" title="02/20/2014 01:05 PM">over 7 years</a> ago</h4>

    <div class="wiki" id="journal-10605-notes"><p><strong>Test case 2</strong></p>


<pre>
[root@botolo ~]# config set test service UDPPorts 100,10000-20000,200 TCPPorts 300,1111-1122 status enabled access public
[root@botolo ~]# signal-event firewall-adjust

[root@botolo ~]# grep "10000" /etc/shorewall/rules 
ACCEPT    loc    $FW    udp    10000:20000
ACCEPT    net    $FW    udp    10000:20000

[root@botolo ~]# grep "1111" /etc/shorewall/rules 
ACCEPT    loc    $FW    tcp    1111:1122
ACCEPT    net    $FW    tcp    1111:1122

[root@botolo ~]# iptables -nvL | grep 1111
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpts:1111:1122 /* test */ 
[root@botolo ~]# iptables -nvL | grep 10000
    6   852 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           udp dpts:10000:20000 /* test */ 
[root@botolo ~]# iptables -nvL | grep "200 " 
    0     0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           udp dpt:200 /* test */ 
[root@botolo ~]# iptables -nvL | grep "100 " 
    0     0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           udp dpt:100 /* test */
</pre> 

	<p><strong>VERIFIED</strong></p></div>
    </div>
  </div>
  
  <div id="change-10606" class="journal has-notes has-details">
    <div id="note-13">
    <h4><a href="/issues/2644#note-13" class="journal-link">#13</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-02-20" title="02/20/2014 02:54 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    <div class="wiki" id="journal-10606-notes"><p><strong>Test case 1</strong></p>


<blockquote>

	<ul>
	<li>Create a clean machine <em>without</em> nethserver-firewall-base installed</li>
	</ul>


</blockquote>

<pre>
[root@botolo ~]# rpm -qa | grep firewall
system-config-firewall-base-1.2.27-5.el6.noarch
</pre>

<blockquote>

	<ul>
	<li>Create two test services with port range and port list</li>
	</ul>


</blockquote>

<pre>
[root@botolo ~]# config set test service UDPPorts 100,10000-20000,200 TCPPorts 300,1111-1122 status enabled access private
[root@botolo ~]#  signal-event firewall-adjust
</pre>

	<p>Testing it</p>


<pre>
[root@botolo ~]# grep -w 10000  /etc/sysconfig/system-config-firewall
--port=10000-20000:udp
[root@botolo ~]# grep -w 100  /etc/sysconfig/system-config-firewall
--port=100:udp
[root@botolo ~]# grep -w 200  /etc/sysconfig/system-config-firewall 
--port=200:udp
[root@botolo ~]# grep -w 300  /etc/sysconfig/system-config-firewall 
--port=300:tcp
[root@botolo ~]# grep -w 1111  /etc/sysconfig/system-config-firewall 
--port=1111-1122:tcp
</pre>

	<p>Testing iptables entry<br /><pre>

[root@botolo ~]# iptables -nvL | grep -w 200
    0     0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW udp dpt:200 
[root@botolo ~]# iptables -nvL | grep -w 100
    0     0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW udp dpt:100 
[root@botolo ~]# iptables -nvL | grep -w 10000
   24  3408 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW udp dpts:10000:20000 
[root@botolo ~]# iptables -nvL | grep -w 300
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:300 
[root@botolo ~]# iptables -nvL | grep -w 1111
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpts:1111:1122 
</pre></p>


	<p><strong>VERIFIED</strong></p></div>
    </div>
  </div>
  
  <div id="change-10610" class="journal has-details">
    <div id="note-14">
    <h4><a href="/issues/2644#note-14" class="journal-link">#14</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-02-20" title="02/20/2014 03:08 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> deleted (<del><i>Alessio Fattorini</i></del>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10718" class="journal has-details">
    <div id="note-15">
    <h4><a href="/issues/2644#note-15" class="journal-link">#15</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-02-26" title="02/26/2014 03:30 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10744" class="journal has-notes">
    <div id="note-16">
    <h4><a href="/issues/2644#note-16" class="journal-link">#16</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-02-26" title="02/26/2014 03:32 PM">over 7 years</a> ago</h4>

    <div class="wiki" id="journal-10744-notes"><p>In nethserver-updates:<br />nethserver-release-6.5-4.ns6.rc1.noarch.rpm<br />nethserver-devbox-1.4.0-1.ns6.noarch.rpm<br />nethserver-backup-data-1.0.9-1.ns6.noarch.rpm<br />nethserver-base-2.1.0-1.ns6.noarch.rpm<br />nethserver-directory-2.0.1-1.ns6.noarch.rpm<br />nethserver-firewall-base-1.1.0-1.ns6.noarch.rpm<br />nethserver-hosts-1.0.7-1.ns6.noarch.rpm<br />nethserver-httpd-2.3.0-1.ns6.noarch.rpm<br />nethserver-httpd-admin-1.2.1-1.ns6.noarch.rpm<br />nethserver-hylafax-1.0.5-1.ns6.noarch.rpm<br />nethserver-ibays-2.0.3-1.ns6.noarch.rpm<br />nethserver-lib-2.0.1-1.ns6.noarch.rpm<br />nethserver-mail-server-1.6.1-1.ns6.noarch.rpm<br />nethserver-nethgui-1.4.0-1.ns6.noarch.rpm<br />nethserver-ntopng-1.1.2-1.ns6.noarch.rpm<br />nethserver-nut-1.0.7-1.ns6.noarch.rpm<br />nethserver-openssh-1.0.5-1.ns6.noarch.rpm<br />nethserver-roundcubemail-0.0.2-1.ns6.noarch.rpm<br />nethserver-samba-1.4.2-1.ns6.noarch.rpm<br />nethserver-shorewall-1.0.4-1.ns6.noarch.rpm<br />nethserver-sogo-thunderbird-1.1.1-1.ns6.noarch.rpm<br />nethserver-vpn-1.1.2-1.ns6.noarch.rpm<br />sogo-frontends-1.3.0-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>

<p class="other-formats">Also available in:  <span><a href="/issues/2644.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="/issues/2644.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>



<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright © 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
