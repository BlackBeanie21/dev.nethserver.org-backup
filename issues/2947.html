<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Bug #2947: Fetchmail re-download all emails after reboot - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" name="csrf-token" />
<link rel='shortcut icon' href='/favicon.ico?1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057" media="all" rel="stylesheet" type="text/css" />
<link href="../stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver../javascripts/theme.js%3F1403512057" type="text/javascript"></script>
<link href="/plugin_assets/openid_fix../stylesheets/openid.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/2947.atom" rel="alternate" title="NethServer 6 - Bug #2947: Fetchmail re-download all emails after reboot" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="/login" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="/" class="home">Home</a></li>
<li><a href="/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    <div id="quick-search">
        <form accept-charset="UTF-8" action="/projects/nethserver/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="/projects/nethserver/search" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
</form>        
    </div>

    <h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>
<li><a href="/projects/nethserver/activity" class="activity">Activity</a></li>
<li><a href="/projects/nethserver/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="/projects/nethserver/issues" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki" class="wiki">Wiki</a></li>
<li><a href="/projects/nethserver/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/nethserver/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/nethserver/issues/report">Summary</a></li>

</ul>




<h3>Custom queries</h3>
<ul class="queries"><li><a href="/projects/nethserver/issues?query_id=60" class="query">6.6 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=64" class="query">6.7 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=65" class="query">6.8 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=66" class="query">6.9 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=12" class="query">@future/closed</a></li>
<li><a href="/projects/nethserver/issues?query_id=55" class="query">KNOWN_BUGS</a></li>
<li><a href="/projects/nethserver/issues?query_id=15" class="query">Lost+Found</a></li>
<li><a href="/projects/nethserver/issues?query_id=24" class="query">NEEDINFO</a></li>
<li><a href="/projects/nethserver/issues?query_id=26" class="query">ON_DEV</a></li>
<li><a href="/projects/nethserver/issues?query_id=27" class="query">ON_QA</a></li>
<li><a href="/projects/nethserver/issues?query_id=44" class="query">TODO Tasks</a></li>
<li><a href="/projects/nethserver/issues?query_id=54" class="query selected">UPDATES</a></li>
<li><a href="/projects/nethserver/issues?query_id=67" class="query">v6.10 (current)</a></li></ul>





        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #2947</h2>

<div class="issue tracker-1 status-5 priority-6 priority-high2 closed details">
    <div class="next-prev-links contextual">
      <a href="/issues/2883" title="#2883">« Previous</a> |
      <a href="/issues/2886" title="#2886">Next »</a>
    </div>

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Fetchmail re-download all emails after reboot</h3></div>
</div>
        <p class="author">
        Added by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-07" title="11/07/2014 11:09 AM">over 6 years</a> ago.
        Updated <a href="/projects/nethserver/activity?from=2014-11-13" title="11/13/2014 11:43 AM">over 6 years</a> ago.
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Urgent</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-fetchmail</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="/versions/201">v6.5</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_15">Security class:</th><td class="cf_15"></td>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
</tr>
<tr>
	<th class="cf_1">Affected version:</th><td class="cf_1"><a href="/versions/200">v6.5-final</a></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>After a reboot fetchmail re-download all emails of pop3 account configured into keep mode (nokeep=NO) in result emails are duplicated two ore three times for every reboot.<br />With a service restart or stop/start the problem is not reproducible<br />It's indipendent of the mail ISP used</p>
  </div>
</div>





<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form>
<table class="list issues">
  <tr class="issue hascontextmenu" id="relation-646">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2924" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="/issues/2924" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2924</a>: Fetchmail support for AD users
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
</table>
</form>

<form accept-charset="UTF-8" action="/issues/2947/relations" class="new_relation" data-remote="true" id="new-relation-form" method="post" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates" selected="selected">Related to</option>
<option value="duplicates">Duplicates</option>
<option value="duplicated">Duplicated by</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script type="text/javascript">
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?project_id=nethserver&scope=all')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-fetchmail/revisions/bc7a7e214d37fc82daec5950fa79efa8bb81aedd" title="Revision bc7a7e21">Revision bc7a7e21</a><br />
        <span class="author">Added by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 05:45 AM">over 6 years</a> ago</span></p>
    <div class="wiki">
        <p>Fetchmail homedir set to /var/lib/nethserver/fetchmail. Refs <a href="/issues/2947" class="issue tracker-1 status-5 priority-6 priority-high2 closed" title="Fetchmail re-download all emails after reboot (CLOSED)">#2947</a></p>


	<p>- The old home is moved to the new location, if exists<br />- The .fetchids DB is moved too, if exists<br />- The .fetchids DB is (automatically) included in data backup<br />- Fixed primary group of fetchmail account</p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-fetchmail/revisions/fb28db5dc52fa629a8c8dd84129f75803d05ee93" title="Revision fb28db5d">Revision fb28db5d</a><br />
        <span class="author">Added by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 10:12 AM">over 6 years</a> ago</span></p>
    <div class="wiki">
        <p>Fixed RPM %pre scriptlet to exit cleanly. Refs <a href="/issues/2947" class="issue tracker-1 status-5 priority-6 priority-high2 closed" title="Fetchmail re-download all emails after reboot (CLOSED)">#2947</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-13035" class="journal has-notes has-details">
    <div id="note-1">
    <h4><a href="/issues/2947#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-07" title="11/07/2014 11:15 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Priority</strong> changed from <i>Normal</i> to <i>Urgent</i></li>
    </ul>
    <div class="wiki" id="journal-13035-notes"><p>I investigated the problem, this file is used to avoids downloading all mails every time:<br />/var/run/fetchmail/.fetchids<br />but /var/run is cleared at each reboot then fetchmail wants to re-download every checked email keeped on ISP</p>


	<p>A possibile way could be stored fetchid in /var/tmp/ becuase is writable from fecthmail user and preserved between reboots<br /><a class="external" href="http://unix.stackexchange.com/questions/30489/what-is-the-difference-between-tmp-and-var-tmp">http://unix.stackexchange.com/questions/30489/what-is-the-difference-between-tmp-and-var-tmp</a><br />Logwatch clear it only if remains untouched for 30 days</p></div>
    </div>
  </div>
  
  <div id="change-13038" class="journal has-notes">
    <div id="note-2">
    <h4><a href="/issues/2947#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-07" title="11/07/2014 12:12 PM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13038-notes"><p>Alessio Fattorini wrote:</p>


<blockquote>

	<p>I investigated the problem, this file is used to avoids downloading all mails every time:<br />/var/run/fetchmail/.fetchids<br />but /var/run is cleared at each reboot then fetchmail wants to re-download every checked email keeped on ISP</p>


</blockquote>

	<p>From fetchmail manual:<pre>
       -i &lt;pathname&gt; | --idfile &lt;pathname&gt;
              (Keyword: idfile)
              Specify  an alternate name for the .fetchids file used to save message
              UIDs. NOTE: since fetchmail 6.3.0, write access to the directory  con-
              taining  the  idfile is required, as fetchmail writes a temporary file
              and renames it into the place of the real idfile only if the temporary
              file  has  been  written  successfully.  This avoids the truncation of
              idfiles when running out of disk space.
</pre></p>


	<p>We could set it in <code>/etc/sysconfig/fetchmail</code>, to store the DB under <code>/var/lib/fetchmail/</code>.</p>


	<p>We should add a backup-include for <code>/var/lib/fetchmail</code>.</p></div>
    </div>
  </div>
  
  <div id="change-13046" class="journal has-notes">
    <div id="note-3">
    <h4><a href="/issues/2947#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-10" title="11/10/2014 06:05 AM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13046-notes"><p>Davide Principi wrote:</p>


<blockquote>

	<p>We could set it in <code>/etc/sysconfig/fetchmail</code>, to store the DB under <code>/var/lib/fetchmail/</code>.</p>


	<p>We should add a backup-include for <code>/var/lib/fetchmail</code>.</p>


</blockquote>

	<p>It seems a good way, fetchmail user must be able to write on this directory</p></div>
    </div>
  </div>
  
  <div id="change-13067" class="journal has-details">
    <div id="note-4">
    <h4><a href="/issues/2947#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-10" title="11/10/2014 02:48 PM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>nethserver-fetchmail</i></li>
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>Target version</strong> set to <i>v6.5</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
       <li><strong>Affected version</strong> set to <i>v6.5-final</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13068" class="journal has-details">
    <div id="note-5">
    <h4><a href="/issues/2947#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-10" title="11/10/2014 02:49 PM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Davide Principi</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13072" class="journal has-notes has-details">
    <div id="note-6">
    <h4><a href="/issues/2947#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 06:09 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Davide Principi</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-13072-notes"><p><code>fetchmail</code> has now a new home dir, where <code>.fetchids</code> DB is stored:<br /><code>/var/lib/nethserver/fetchmail</code>.</p>


	<p><strong>Test cases</strong></p>


	<p>The modified version must fix the described bug. Moreover, test</p>


	<p>1. Fresh installation of the modified package<br />2. Update existing 1.0.5, where the fetchmail daemon has never been started (<code>.fetchids</code> DB does not exist)<br />3. Update a running 1.0.5, with existing <code>/var/run/fetchmail/.fetchids</code>: verify the DB was moved to the new home</p>


	<p>On each of the above tests,  the deamon must run with <code>fetchmail</code> group:<pre>
   # id -g fetchmail
490
   # ps -C fetchmail -o rgid,ruid
 RGID  RUID
  490   490
</pre></p></div>
    </div>
  </div>
  
  <div id="change-13073" class="journal has-notes has-details">
    <div id="note-7">
    <h4><a href="/issues/2947#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 06:09 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-13073-notes"><p>In nethserver-testing:<br />nethserver-fetchmail-1.0.5-1.0gitbc7a7e21.ns6.noarch.rpm</p></div>
    </div>
  </div>
  
  <div id="change-13074" class="journal has-details">
    <div id="note-8">
    <h4><a href="/issues/2947#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 06:58 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Alessio Fattorini</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13097" class="journal has-notes">
    <div id="note-9">
    <h4><a href="/issues/2947#note-9" class="journal-link">#9</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 01:27 PM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13097-notes"><p><strong>Test 2</strong></p>


	<p>No .fetchuids<br /><pre>
[root@muflone ~]# ll -la /var/run/fetchmail/
totale 8
drwxr-x---.  2 fetchmail root 4096 15 ott 15:14 .
drwxr-xr-x. 30 root      root 4096 23 ott 15:54 ..
</pre></p>


	<p>I upgrade<br /><pre>
Running Transaction
  Updating   : nethserver-fetchmail-1.0.5-1.0gitbc7a7e21.ns6.noarch                               1/2 
fetchmail è interrotto
mv: impossibile fare stat di `/var/run/fetchmail/.fetchids': No such file or directory
il proprietario di `/var/lib/nethserver/fetchmail' è stato cambiato in fetchmail:fetchmail
  Cleanup    : nethserver-fetchmail-1.0.5-1.ns6.noarch                                            2/2 
  Verifying  : nethserver-fetchmail-1.0.5-1.0gitbc7a7e21.ns6.noarch                               1/2 
  Verifying  : nethserver-fetchmail-1.0.5-1.ns6.noarch  
</pre></p>


	<p>fetchmail configured then it can creates .fetchids<br /><pre>
[root@muflone ~]# ll -la /var/lib/nethserver/fetchmail/
totale 12
drwxr-x---.  2 fetchmail fetchmail 4096 23 ott 16:05 .
drwxr-xr-x. 13 root      root      4096 11 nov  2014 ..
-rw-------.  1 fetchmail fetchmail   34 23 ott 16:05 .fetchids
</pre></p>


	<p>Rebooted, fetchuids is still there</p>


	<p><strong>VERIFIED</strong></p>


	<p><strong>Test 3</strong></p>


	<p>.fetchuid is created <br /><pre>
[root@muflone ~]# ll -a /var/run/fetchmail/
totale 16
drwxr-x---.  2 fetchmail root  4096 11 nov 19:03 .
drwxr-xr-x. 30 root      root  4096 11 nov 19:03 ..
-rw-------.  1 fetchmail users   34 11 nov 19:03 .fetchids
-rw-------.  1 fetchmail users    9 11 nov 19:03 fetchmail.pid
</pre></p>


	<p>Upgrade</p>


<pre>
il proprietario di `/var/lib/nethserver/fetchmail/.fetchids' è stato cambiato in fetchmail:fetchmail
il proprietario di `/var/lib/nethserver/fetchmail' è stato cambiato in fetchmail:fetchmail
  Cleanup    : nethserver-fetchmail-1.0.5-1.ns6.noarch                                            2/2 
  Verifying  : nethserver-fetchmail-1.0.5-1.0gitbc7a7e21.ns6.noarch                               1/2 
  Verifying  : nethserver-fetchmail-1.0.5-1.ns6.noarch
</pre> 

	<p>.fetchuid is correctly moved<br /><pre>
[root@muflone ~]# ll -a /var/lib/nethserver/fetchmail/
totale 12
drwxr-x---.  2 fetchmail fetchmail 4096 11 nov 19:05 .
drwxr-xr-x. 13 root      root      4096 11 nov 11:45 ..
-rw-------.  1 fetchmail fetchmail   34 11 nov 19:05 .fetchids
</pre></p>


	<p>After reboot .fetchid is persistent<br /><pre>
[root@muflone ~]# ll -a /var/lib/nethserver/fetchmail/
totale 12
drwxr-x---.  2 fetchmail fetchmail 4096 11 nov 19:08 .
drwxr-xr-x. 13 root      root      4096 11 nov 11:45 ..
-rw-------.  1 fetchmail fetchmail   34 11 nov 19:08 .fetchids
</pre></p>


	<p><strong>VERIFIED</strong></p>


	<p>Remains only the the first test</p></div>
    </div>
  </div>
  
  <div id="change-13098" class="journal has-notes">
    <div id="note-10">
    <h4><a href="/issues/2947#note-10" class="journal-link">#10</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 01:33 PM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13098-notes"><p><strong>Test 1</strong> <br />/var/lib/nethserver/fetchmail/ correctly created</p>


	<p><strong>VERIFIED</strong></p></div>
    </div>
  </div>
  
  <div id="change-13099" class="journal has-notes">
    <div id="note-11">
    <h4><a href="/issues/2947#note-11" class="journal-link">#11</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/8" class="user active">Filippo Carletti</a> <a href="/projects/nethserver/activity?from=2014-11-11" title="11/11/2014 03:44 PM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13099-notes"><blockquote>

	<p>mv: impossibile fare stat di `/var/run/fetchmail/.fetchids': No such file or directory<br />il proprietario di `/var/lib/nethserver/fetchmail' è stato cambiato in fetchmail:fetchmail</p>


</blockquote>

	<p>Do we really want the above output?</p></div>
    </div>
  </div>
  
  <div id="change-13100" class="journal has-notes">
    <div id="note-12">
    <h4><a href="/issues/2947#note-12" class="journal-link">#12</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 03:18 AM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13100-notes"><p>Filippo Carletti wrote:</p>


<blockquote>

	<p>Do we really want the above output?</p>


</blockquote>

	<p>The <code>mv</code> error could be suppressed, as it is a normal condition. I would keep the <code>chown -c</code> output. It keeps track of the scriptlet activity, and may help troubleshooting.</p>


	<p>Alessio, what does the <code>yum history</code> say? The transasction was marked with <code>E</code> or similar?</p></div>
    </div>
  </div>
  
  <div id="change-13109" class="journal has-details">
    <div id="note-13">
    <h4><a href="/issues/2947#note-13" class="journal-link">#13</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 06:07 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Related to</strong> <i><a href="/issues/2924" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2924</a>: Fetchmail support for AD users</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13110" class="journal has-notes">
    <div id="note-14">
    <h4><a href="/issues/2947#note-14" class="journal-link">#14</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 06:32 AM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13110-notes"><p>Davide Principi wrote:</p>


<blockquote>

	<p>Alessio, what does the <code>yum history</code> say? The transasction was marked with <code>E</code> or similar?</p>


</blockquote>

	<p>It's marked as 2 EE</p></div>
    </div>
  </div>
  
  <div id="change-13111" class="journal has-details">
    <div id="note-15">
    <h4><a href="/issues/2947#note-15" class="journal-link">#15</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 06:35 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>TRIAGED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Alessio Fattorini</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>20</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13112" class="journal has-details">
    <div id="note-16">
    <h4><a href="/issues/2947#note-16" class="journal-link">#16</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 06:35 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Davide Principi</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13115" class="journal has-notes has-details">
    <div id="note-17">
    <h4><a href="/issues/2947#note-17" class="journal-link">#17</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 10:28 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Davide Principi</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-13115-notes"><p>Alessio Fattorini wrote:</p>


<blockquote>

	<p>It's marked as 2 EE</p>


</blockquote>

	<p>The EE says a scriptlet generated some output. It's a warning/non-fatal-error condition. See <code>man yum</code> for more infos.</p>


	<p><strong>MODIFIED</strong></p>


	<p>Exit code is always 0. Messages are now silenced.</p></div>
    </div>
  </div>
  
  <div id="change-13116" class="journal has-notes has-details">
    <div id="note-18">
    <h4><a href="/issues/2947#note-18" class="journal-link">#18</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-12" title="11/12/2014 10:29 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-13116-notes"><p>In nethserver-testing:<br />nethserver-fetchmail-1.0.5-2.0gitfb28db5d.ns6.noarch.rpm</p></div>
    </div>
  </div>
  
  <div id="change-13133" class="journal has-notes">
    <div id="note-19">
    <h4><a href="/issues/2947#note-19" class="journal-link">#19</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-13" title="11/13/2014 10:38 AM">over 6 years</a> ago</h4>

    <div class="wiki" id="journal-13133-notes"><p>Tested with a fresh install and upgrade,  messages are now silenced.<br /><strong>Verified</strong></p></div>
    </div>
  </div>
  
  <div id="change-13134" class="journal has-details">
    <div id="note-20">
    <h4><a href="/issues/2947#note-20" class="journal-link">#20</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/10" class="user active">Alessio Fattorini</a> <a href="/projects/nethserver/activity?from=2014-11-13" title="11/13/2014 10:53 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13137" class="journal has-notes has-details">
    <div id="note-21">
    <h4><a href="/issues/2947#note-21" class="journal-link">#21</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-11-13" title="11/13/2014 11:43 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-13137-notes"><p>In nethserver-updates:<br />nethserver-fetchmail-1.0.6-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>

<p class="other-formats">Also available in:  <span><a href="/issues/2947.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="/issues/2947.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>



<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright © 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
