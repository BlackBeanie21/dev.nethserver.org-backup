<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Bug #3018: Template fragment for /etc/openvpn/host-to-net.conf add push for network added in networks db  - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" name="csrf-token" />
<link rel='shortcut icon' href='/favicon.ico?1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057" media="all" rel="stylesheet" type="text/css" />
<link href="../stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver../javascripts/theme.js%3F1403512057" type="text/javascript"></script>
<link href="/plugin_assets/openid_fix../stylesheets/openid.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/3018.atom" rel="alternate" title="NethServer 6 - Bug #3018: Template fragment for /etc/openvpn/host-to-net.conf add push for network added in networks db " type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="/login" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="/" class="home">Home</a></li>
<li><a href="/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    <div id="quick-search">
        <form accept-charset="UTF-8" action="/projects/nethserver/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="/projects/nethserver/search" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
</form>        
    </div>

    <h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>
<li><a href="/projects/nethserver/activity" class="activity">Activity</a></li>
<li><a href="/projects/nethserver/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="/projects/nethserver/issues" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki" class="wiki">Wiki</a></li>
<li><a href="/projects/nethserver/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/nethserver/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/nethserver/issues/report">Summary</a></li>

</ul>




<h3>Custom queries</h3>
<ul class="queries"><li><a href="/projects/nethserver/issues?query_id=60" class="query">6.6 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=64" class="query">6.7 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=65" class="query">6.8 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=66" class="query">6.9 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=12" class="query">@future/closed</a></li>
<li><a href="/projects/nethserver/issues?query_id=55" class="query">KNOWN_BUGS</a></li>
<li><a href="/projects/nethserver/issues?query_id=15" class="query">Lost+Found</a></li>
<li><a href="/projects/nethserver/issues?query_id=24" class="query">NEEDINFO</a></li>
<li><a href="/projects/nethserver/issues?query_id=26" class="query">ON_DEV</a></li>
<li><a href="/projects/nethserver/issues?query_id=27" class="query">ON_QA</a></li>
<li><a href="/projects/nethserver/issues?query_id=44" class="query">TODO Tasks</a></li>
<li><a href="/projects/nethserver/issues?query_id=54" class="query selected">UPDATES</a></li>
<li><a href="/projects/nethserver/issues?query_id=67" class="query">v6.10 (current)</a></li></ul>





        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #3018</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">
    <div class="next-prev-links contextual">
      <a href="/issues/3082" title="#3082">« Previous</a> |
      <a href="/issues/3037" title="#3037">Next »</a>
    </div>

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/541ee3a2fa916bc906fc9473c9937027?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Template fragment for /etc/openvpn/host-to-net.conf add push for network added in networks db </h3></div>
</div>
        <p class="author">
        Added by <a href="/users/15" class="user active">Andrea Marchionni</a> <a href="/projects/nethserver/activity?from=2015-02-02" title="02/02/2015 09:21 AM">over 6 years</a> ago.
        Updated <a href="/projects/nethserver/activity?from=2015-03-11" title="03/11/2015 04:25 AM">over 6 years</a> ago.
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-openvpn</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="/versions/209">v6.6</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_15">Security class:</th><td class="cf_15"></td>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
</tr>
<tr>
	<th class="cf_1">Affected version:</th><td class="cf_1"><a href="/versions/201">v6.5</a></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>The template fragment</p>


<pre>
/etc/e-smith/templates-custom/etc/openvpn/host-to-net.conf/40route
</pre>

	<p>add in openvpn file a push command for every networks added in networks db.</p>


<pre>
[root@nethserver]# db networks show
10.10.28.0=network
    Description=
    Mask=255.255.255.0
10.10.33.0=network
    Description=
    Mask=255.255.255.0
10.10.38.0=network
    Description=
    Mask=255.255.255.0
10.10.43.0=network
    Description=
    Mask=255.255.255.0
10.10.51.0=network
    Description=
    Mask=255.255.255.0
10.10.52.0=network
    Description=
    Mask=255.255.255.0
10.10.53.0=network
    Description=
    Mask=255.255.255.0
10.10.70.0=network
    Description=
    Mask=255.255.255.0
192.168.28.0=network
    Description=
    Mask=255.255.255.0
192.168.33.0=network
    Description=
    Mask=255.255.255.0
192.168.38.0=network
    Description=
    Mask=255.255.255.0
192.168.43.0=network
    Description=
    Mask=255.255.255.0
192.168.51.0=network
    Description=
    Mask=255.255.255.0
192.168.52.0=network
    Description=
    Mask=255.255.255.0
192.168.53.0=network
    Description=
    Mask=255.255.255.0
192.168.70.0=network
    Description=
    Mask=255.255.255.0
</pre>

	<p>Here the config file<br /><pre>
push "route 10.10.28.0 255.255.255.0" 
push "route 10.10.33.0 255.255.255.0" 
push "route 10.10.38.0 255.255.255.0" 
push "route 10.10.43.0 255.255.255.0" 
push "route 10.10.51.0 255.255.255.0" 
push "route 10.10.52.0 255.255.255.0" 
push "route 10.10.53.0 255.255.255.0" 
push "route 10.10.70.0 255.255.255.0" 
push "route 192.168.28.0 255.255.255.0" 
push "route 192.168.33.0 255.255.255.0" 
push "route 192.168.38.0 255.255.255.0" 
push "route 192.168.43.0 255.255.255.0" 
push "route 192.168.51.0 255.255.255.0" 
push "route 192.168.52.0 255.255.255.0" 
push "route 192.168.53.0 255.255.255.0" 
push "route 192.168.70.0 255.255.255.0" 
</pre></p>


	<p>This is a problem for the client of host to net openvpn</p>


<pre>
10.10.17.5      0.0.0.0         255.255.255.255 UH    0      0        0 tun0
10.10.38.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.52.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.70.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.53.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.70.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.53.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.52.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.51.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.51.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.17.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.33.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.17.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.33.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.28.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.28.0    10.10.17.5      255.255.255.0   UG    0      0        0 tun0
10.10.43.0      10.10.17.5      255.255.255.0   UG    0      0        0 tun0
192.168.43.0    10.10.17.5      255.255.255.0   UG  0       0        0 tun0
</pre>

	<p>because it has many wrong routes for this networks, this routes create navigation problems, for example.<br />Add networks from routes db instead of nethworks db may be more correctly.</p>
  </div>
</div>





<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form>
<table class="list issues">
  <tr class="issue hascontextmenu" id="relation-681">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="3037" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="/issues/3037" class="issue tracker-2 status-5 priority-4 priority-default closed">Feature #3037</a>: Adding a route should re-create vpn config files
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
</table>
</form>

<form accept-charset="UTF-8" action="/issues/3018/relations" class="new_relation" data-remote="true" id="new-relation-form" method="post" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates" selected="selected">Related to</option>
<option value="duplicates">Duplicates</option>
<option value="duplicated">Duplicated by</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script type="text/javascript">
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?project_id=nethserver&scope=all')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-openvpn/revisions/9033ff6e251fbef20e1257222bc712868d596b55" title="Revision 9033ff6e">Revision 9033ff6e</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-20" title="02/20/2015 04:40 AM">over 6 years</a> ago</span></p>
    <div class="wiki">
        <p>host-to-net: push static routes to client. Refs <a href="/issues/3018" class="issue tracker-1 status-5 priority-4 priority-default closed" title="Template fragment for /etc/openvpn/host-to-net.conf add push for network added in networks db  (CLOSED)">#3018</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-13911" class="journal has-details">
    <div id="note-1">
    <h4><a href="/issues/3018#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/541ee3a2fa916bc906fc9473c9937027?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/15" class="user active">Andrea Marchionni</a> <a href="/projects/nethserver/activity?from=2015-02-02" title="02/02/2015 09:26 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Description</strong> updated (<a href="/journals/diff/13911?detail_id=22708" title="View differences">diff</a>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13937" class="journal has-notes has-details">
    <div id="note-2">
    <h4><a href="/issues/3018#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-05" title="02/05/2015 03:55 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>Target version</strong> set to <i>v6.6</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-13937-notes"><p>I agree on this.</p></div>
    </div>
  </div>
  
  <div id="change-14156" class="journal has-details">
    <div id="note-3">
    <h4><a href="/issues/3018#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-20" title="02/20/2015 03:14 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-14160" class="journal has-details">
    <div id="note-4">
    <h4><a href="/issues/3018#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-20" title="02/20/2015 09:21 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-14165" class="journal has-details">
    <div id="note-5">
    <h4><a href="/issues/3018#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-20" title="02/20/2015 09:34 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Related to</strong> <i><a href="/issues/3037" class="issue tracker-2 status-5 priority-4 priority-default closed">Feature #3037</a>: Adding a route should re-create vpn config files</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-14166" class="journal has-notes has-details">
    <div id="note-6">
    <h4><a href="/issues/3018#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-02-20" title="02/20/2015 09:34 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-14166-notes">Package in nethserver-testing:
	<ul>
	<li>nethserver-openvpn-1.1.2-1.9.gac620ff.ns6.noarch.rpm</li>
	</ul>


	<p>See test case from <a href="/issues/3037" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Adding a route should re-create vpn config files (CLOSED)">#3037</a></p></div>
    </div>
  </div>
  
  <div id="change-14239" class="journal has-details">
    <div id="note-7">
    <h4><a href="/issues/3018#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/c96c358beddd941e6188349f3c98ccd3?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/11" class="user active">Davide Marini</a> <a href="/projects/nethserver/activity?from=2015-02-27" title="02/27/2015 12:19 PM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-14467" class="journal has-notes has-details">
    <div id="note-8">
    <h4><a href="/issues/3018#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2015-03-11" title="03/11/2015 04:25 AM">over 6 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-14467-notes">Released in nethserver-base:
	<ul>
	<li>nethserver-openvpn-1.2.0-1.ns6.noarch.rpm</li>
	</ul></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>

<p class="other-formats">Also available in:  <span><a href="/issues/3018.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="/issues/3018.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>



<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright © 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
