<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Feature #2332: Firewall-base: add support for multi-wan - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" name="csrf-token" />
<link rel='shortcut icon' href='/favicon.ico?1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057" media="all" rel="stylesheet" type="text/css" />
<link href="../stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver../javascripts/theme.js%3F1403512057" type="text/javascript"></script>
<link href="/plugin_assets/openid_fix../stylesheets/openid.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/2332.atom" rel="alternate" title="NethServer 6 - Feature #2332: Firewall-base: add support for multi-wan" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="/login" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="/" class="home">Home</a></li>
<li><a href="/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    <div id="quick-search">
        <form accept-charset="UTF-8" action="/projects/nethserver/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="/projects/nethserver/search" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
</form>        
    </div>

    <h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>
<li><a href="/projects/nethserver/activity" class="activity">Activity</a></li>
<li><a href="/projects/nethserver/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="/projects/nethserver/issues" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki" class="wiki">Wiki</a></li>
<li><a href="/projects/nethserver/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/nethserver/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/nethserver/issues/report">Summary</a></li>

</ul>




<h3>Custom queries</h3>
<ul class="queries"><li><a href="/projects/nethserver/issues?query_id=60" class="query">6.6 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=64" class="query">6.7 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=65" class="query">6.8 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=66" class="query">6.9 (changelog)</a></li>
<li><a href="/projects/nethserver/issues?query_id=12" class="query">@future/closed</a></li>
<li><a href="/projects/nethserver/issues?query_id=55" class="query">KNOWN_BUGS</a></li>
<li><a href="/projects/nethserver/issues?query_id=15" class="query">Lost+Found</a></li>
<li><a href="/projects/nethserver/issues?query_id=24" class="query">NEEDINFO</a></li>
<li><a href="/projects/nethserver/issues?query_id=26" class="query">ON_DEV</a></li>
<li><a href="/projects/nethserver/issues?query_id=27" class="query">ON_QA</a></li>
<li><a href="/projects/nethserver/issues?query_id=44" class="query">TODO Tasks</a></li>
<li><a href="/projects/nethserver/issues?query_id=54" class="query selected">UPDATES</a></li>
<li><a href="/projects/nethserver/issues?query_id=67" class="query">v6.10 (current)</a></li></ul>





        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #2332</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Firewall-base: add support for multi-wan</h3></div>
</div>
        <p class="author">
        Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-06" title="11/06/2013 05:56 PM">over 7 years</a> ago.
        Updated <a href="/projects/nethserver/activity?from=2014-08-20" title="08/20/2014 06:01 AM">almost 7 years</a> ago.
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-firewall-base</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="/versions/201">v6.5</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Add support for multi-wan configuration.<br />A virtually unlimited number of red interface should be allowed.</p>


Multi-wan must implement two behavior:
	<ul>
	<li>weighted balanced mode: each new connection can use a random configured red interface</li>
		<li>active backup: all traffic is routed through the master interface, backup connections will be used only in case of master failure</li>
	</ul>


See:
	<ul>
	<li><a class="external" href="http://www.shorewall.net/MultiISP.html">http://www.shorewall.net/MultiISP.html</a></li>
	</ul>
  </div>
</div>





<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form>
<table class="list issues">
  <tr class="issue hascontextmenu" id="relation-557">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2743" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="/issues/2743" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2743</a>: Base: split &#x27;local networks&#x27; into &#x27;static routes&#x27; and &#x27;tr...
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
  <tr class="issue hascontextmenu" id="relation-571">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2771" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="/issues/2771" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2771</a>: Merge nethserver-shorewall and nethserver-firewall-base
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
  <tr class="issue hascontextmenu" id="relation-586">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2827" /></td>
  <td class="subject">
    Copied to
    
    NethServer 6 - 
    <a href="/issues/2827" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2827</a>: Firewall-base: multi-wan dhcp failover not supported
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
</table>
</form>

<form accept-charset="UTF-8" action="/issues/2332/relations" class="new_relation" data-remote="true" id="new-relation-form" method="post" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="O9v8tr7jDWYApOdi0G+30QrigCY6Zlvwpp0a1SfpBeU=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates" selected="selected">Related to</option>
<option value="duplicates">Duplicates</option>
<option value="duplicated">Duplicated by</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script type="text/javascript">
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?project_id=nethserver&scope=all')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-squid/revisions/7f3daf42726373ab146cd44f5830a4640dda007f" title="Revision 7f3daf42">Revision 7f3daf42</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 10:01 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>providers and tcrules template: add support for multi-wan. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-ipsec/revisions/e4e99ab5e6682bdc56c0314a36f4917d04f09444" title="Revision e4e99ab5">Revision e4e99ab5</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 10:06 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>shorewall hosts template: add support for multi-wan. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/463526393f267a73790a25609922d81519979e17" title="Revision 46352639">Revision 46352639</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 11:55 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>createlinks, shorewall templates: add support for multi-wan, add oriDst prop for portforwards. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-shorewall/revisions/28006da24c60a899a6f61eac5b8093745d39afa5" title="Revision 28006da2">Revision 28006da2</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 04:08 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>shorewall.conf template: add support for multi-wan. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/883d4ec41e7e57ca29a599951f1cdb9ce0fe8123" title="Revision 883d4ec4">Revision 883d4ec4</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-11" title="11/11/2013 04:10 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>shorewall_script_nethesis: handle only group events. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-shorewall/revisions/3d7d5066635b8c731064791b75c4101feab9d3a7" title="Revision 3d7d5066">Revision 3d7d5066</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-11" title="11/11/2013 04:15 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>shorewall.conf layout: use high bit to mark provider traffic. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/90cb235df16835a028d251bcc5dd82c011afd075" title="Revision 90cb235d">Revision 90cb235d</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-11" title="11/11/2013 04:19 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>/etc/shorewall/providers template: use high bit for provider mark. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-squid/revisions/3db3b27439bbe56f2e02a536f73653553b04a7e8" title="Revision 3db3b274">Revision 3db3b274</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-11" title="11/11/2013 04:22 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>/etc/shorewall/providers: auto-calculate tproxy rule index. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/6477105831d6cf5d2f68f2743631d6f741806d6c" title="Revision 64771058">Revision 64771058</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-04" title="04/04/2014 06:55 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Web UI: add GUI for Providers. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/11170bf2fad9b02ae2809673fbe50f146b55e660" title="Revision 11170bf2">Revision 11170bf2</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-07" title="04/07/2014 09:49 AM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Multi WAN: move provider configuration to network db. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/3f5025fbc80357ab9364f32f61760c86173c8274" title="Revision 3f5025fb">Revision 3f5025fb</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-10" title="04/10/2014 03:31 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>tcinterfaces templates: Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/0d8542d77e6ea6e5bbe92c3e5da90f3071e45feb" title="Revision 0d8542d7">Revision 0d8542d7</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-10" title="04/10/2014 04:25 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Templates: custom findgw for red with DHCP. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/0cf92f9746253a8aabc21415e95c83222de21e30" title="Revision 0cf92f97">Revision 0cf92f97</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-10" title="04/10/2014 04:43 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Web interface: add header for Configure controller. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/28e8ff7762070f6dcf4a7fff4750b7e0fccd1924" title="Revision 28e8ff77">Revision 28e8ff77</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-10" title="04/10/2014 05:41 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Events: add wan-uplink-event. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/d2aaf50a69ffcb55a4f7f7b9f7c7fad2563ae400" title="Revision d2aaf50a">Revision d2aaf50a</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-10" title="04/10/2014 05:52 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Events: add new wan-link-update event. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/89040b9913fec00e09ff0c233c4895ff3a47af0e" title="Revision 89040b99">Revision 89040b99</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-15" title="04/15/2014 05:37 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>lsm.conf template: change default timeout values Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/ba363adc17f3f42d5b01da093b7045571b3b69b5" title="Revision ba363adc">Revision ba363adc</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-16" title="04/16/2014 12:41 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>nethserver-shorewall-wan-update: disable interface if event is no 'up'. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-shorewall/revisions/786c258e9c5f8c1372740b279d01cb068e09a30a" title="Revision 786c258e">Revision 786c258e</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-16" title="04/16/2014 04:33 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>shorewall.conf: change ROVIDER_BITS value. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/e84ddc172813d24f68f2c17c5bd472c8f288e0b6" title="Revision e84ddc17">Revision e84ddc17</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-16" title="04/16/2014 05:30 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Web ui: update MultiWAN. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/52e490a45956b5ae559ce8b9561e3f33b8fc48db" title="Revision 52e490a4">Revision 52e490a4</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-16" title="04/16/2014 05:39 PM">over 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Providers: always sort providers in descending order. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/1c5181033bee2653a603c1d5c7565b5236f752a8" title="Revision 1c518103">Revision 1c518103</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-08" title="05/08/2014 01:52 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>actions: add support for static routes. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/5da14a15c05b18cfebac7ed0fd72c4226e23b0cb" title="Revision 5da14a15">Revision 5da14a15</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-08" title="05/08/2014 02:20 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>actions: move static routes to routes db. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/d18738e175e07281f383aefa7c09d66f3e369b5f" title="Revision d18738e1">Revision d18738e1</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-08" title="05/08/2014 02:32 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>actions: change static route records from 'route' to 'static' type. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/64b83003382669e4bfaea4fcdc4fae9c04f96789" title="Revision 64b83003">Revision 64b83003</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-09" title="05/09/2014 11:55 AM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>createlinks, actions: add provider static routes to static-routes-save event. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/96a6b72e947261eac6b71e6be358464487ab7006" title="Revision 96a6b72e">Revision 96a6b72e</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-09" title="05/09/2014 02:41 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Network configuration: support provider-static routes. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>


	<p>Handle special static routes for providers.</p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-base/revisions/6062bb8082e4bb041de604e2aabe7c032c635dee" title="Revision 6062bb80">Revision 6062bb80</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-09" title="05/09/2014 02:41 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>createlinks: add static-routes-save event. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/423a7f5c3a64e9e974777ff14de233962171af5e" title="Revision 423a7f5c">Revision 423a7f5c</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-09" title="05/09/2014 02:52 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>providers: use Firewall library in templates. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/5212533023f93f02b7b4f0b85241e8cc600e067a" title="Revision 52125330">Revision 52125330</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-13" title="05/13/2014 09:01 AM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Providers: support enable/disable. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/93f03e7908d38e8c739d017e63ceca95dc269dd8" title="Revision 93f03e79">Revision 93f03e79</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-13" title="05/13/2014 04:07 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>lsm.conf: skip disabled providers. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/56007e890492330291eb5ac2a26de48448861b57" title="Revision 56007e89">Revision 56007e89</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-13" title="05/13/2014 06:51 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Firewall.pm: fix provider logic. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/4aa7d657282db6e42accbcf147f6116a0990017a" title="Revision 4aa7d657">Revision 4aa7d657</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-13" title="05/13/2014 06:51 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Web UI: show provider status on dashboard. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/7af76170880a54b12fc232339f61db62613b633d" title="Revision 7af76170">Revision 7af76170</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-28" title="05/28/2014 10:36 AM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>providers-static-routes: remove blank spaces. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/b8132cc60356aff0157be28371b3a0003c09d409" title="Revision b8132cc6">Revision b8132cc6</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-06-05" title="06/05/2014 06:30 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>init scripts: start lsm only if there is at least one provider. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/d4a46e58f11c0f0dd6e05477301001425ae91322" title="Revision d4a46e58">Revision d4a46e58</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-06-05" title="06/05/2014 07:02 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>init scripts: fix start/restart. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <p><a href="/projects/nethserver/repository/nethserver-firewall-base/revisions/47214a8c105e0216ebbe33ad1336f0a8b0093531" title="Revision 47214a8c">Revision 47214a8c</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-07-08" title="07/08/2014 10:27 AM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>Inline help: add Multi WAN rst files. Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>
    <div class="changeset even">
    <p><a href="/projects/nethserver/repository/nethserver-lsm/revisions/d1194baa0975c6ee5da6a9e6e523e40fedc2efc1" title="Revision d1194baa">Revision d1194baa</a><br />
        <span class="author">Added by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-07-28" title="07/28/2014 12:51 PM">about 7 years</a> ago</span></p>
    <div class="wiki">
        <p>lsm.conf template: change default timeout values Refs <a href="/issues/2332" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Firewall-base: add support for multi-wan (CLOSED)">#2332</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-8316" class="journal has-details">
    <div id="note-1">
    <h4><a href="/issues/2332#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 08:41 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-8318" class="journal has-details">
    <div id="note-2">
    <h4><a href="/issues/2332#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 08:41 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-8336" class="journal has-notes has-details">
    <div id="note-3">
    <h4><a href="/issues/2332#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-07" title="11/07/2013 05:30 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-8336-notes"><p>Commited test implementation.</p>


	<p>See <a href="/projects/nethserver/wiki/Gateway_Design" class="wiki-page new">Gateway Design</a>.</p>


	<p>In nethserver-testing:<br />nethserver-shorewall-1.0.2-1.0git28006da2.ns6<br />nethserver-firewall-base-1.0.6-3.0git54f43433.ns6<br />nethserver-ipsec-1.0.0-1.0gite4e99ab5.ns6<br />nethserver-squid-1.0.4-1.0git7f3daf42.ns6<br />nethserver-lsm-0.0.3-1.ns6<br />lsm-0.163-1.ns6</p></div>
    </div>
  </div>
  
  <div id="change-8361" class="journal has-details">
    <div id="note-4">
    <h4><a href="/issues/2332#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2013-11-08" title="11/08/2013 04:56 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_DEV</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10242" class="journal has-details">
    <div id="note-5">
    <h4><a href="/issues/2332#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-01-29" title="01/29/2014 03:02 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Target version</strong> set to <i>~FUTURE</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10960" class="journal has-details">
    <div id="note-6">
    <h4><a href="/issues/2332#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-07" title="04/07/2014 09:14 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-10969" class="journal has-details">
    <div id="note-7">
    <h4><a href="/issues/2332#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-04-09" title="04/09/2014 10:18 AM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>~FUTURE</i> to <i>v6.5</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11088" class="journal has-notes has-details">
    <div id="note-8">
    <h4><a href="/issues/2332#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-05" title="05/05/2014 03:44 PM">over 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
    </ul>
    <div class="wiki" id="journal-11088-notes"><p>For each configured provider, the system (LSM) will send ping to a configured IP (<code>checkip</code>). <br />When a provider status  changes, the system will signal a <code>wan-uplink-update</code> event.</p>


Inside the event, the action <code>nethserver-shorewall-wan-update</code>  invokes:
	<ul>
	<li><code>shorewall enable &lt;interface&gt;</code> when a red interface is usable</li>
		<li><code>shorewall disable &lt;interface&gt;</code> then a red interface is not usable</li>
	</ul>


	<p>When an interface is disabled, all associated routes will be deleted. If <code>checkip</code> belongs to an external network, the system will not be able to check the link status because there will no route to the external host.  With current implementation when an interface is disabled, there is no way to re-enabled it.</p>


See:
	<ul>
	<li><a class="external" href="http://sourceforge.net/p/shorewall/mailman/message/31386555/">http://sourceforge.net/p/shorewall/mailman/message/31386555/</a></li>
		<li><a class="external" href="http://sourceforge.net/p/shorewall/mailman/message/32303796/">http://sourceforge.net/p/shorewall/mailman/message/32303796/</a></li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-11096" class="journal has-notes">
    <div id="note-9">
    <h4><a href="/issues/2332#note-9" class="journal-link">#9</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-06" title="05/06/2014 01:01 PM">over 7 years</a> ago</h4>

    <div class="wiki" id="journal-11096-notes"><p>The solution is to add static routes for checkip inside the main table.</p>


	<p>For example, if checkip is 89.97.3.129:<br /><pre>
 ip ro add 89.97.3.129/32 via 89.97.245.225
</pre></p>


Some considerations:
	<ul>
	<li>static rules must be added in <code>firewall-adjust</code> event and after boot (maybe we can use <a class="external" href="http://shorewall.net/shorewall_extension_scripts.htm">http://shorewall.net/shorewall_extension_scripts.htm</a>)</li>
		<li>a checkip can't be reused between providers</li>
		<li>when a red interface goes down, the host specified as checkip is no more reachable, so do not use system DNS as checkip</li>
		<li>probably the best checkip is the hop just next the gateway</li>
	</ul>


	<p>To find the next hop use:<br /><pre>
ping -c 1 -I eth2 -t 2 8.8.8.8 | grep 'Time to live'  | cut -d' ' -f2
</pre></p></div>
    </div>
  </div>
  
  <div id="change-11097" class="journal has-notes">
    <div id="note-10">
    <h4><a href="/issues/2332#note-10" class="journal-link">#10</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-08" title="05/08/2014 04:27 PM">about 7 years</a> ago</h4>

    <div class="wiki" id="journal-11097-notes"><p>Added static routes support. Routes will be generate in <code>interface-update</code> and <code>network-*</code> events.</p>


	<p>A static route is a record of type <code>static</code> inside the <code>routes</code> database.<br />Each record has following properties:</p>


	<ul>
	<li>key: network address</li>
		<li>Mask: network mask</li>
		<li>Router: gateway for the network</li>
		<li>Description: a custom description (optional)</li>
	</ul>


	<p>Example:<br /><pre>
8.8.4.4=static
    Description=My route
    Mask=255.255.255.255
    Router=89.97.245.225
</pre></p>


	<p>Added also special static routes providers. These routes are auto-calculated by the system and <br />can't be edited by the user.<br />Static routes for providers are records of type <code>provider-static</code> inside the <code>routes</code> database.<br />Valid properties are the same of <code>static</code> records.</p></div>
    </div>
  </div>
  
  <div id="change-11098" class="journal has-details">
    <div id="note-11">
    <h4><a href="/issues/2332#note-11" class="journal-link">#11</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-09" title="05/09/2014 11:34 AM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11118" class="journal has-details">
    <div id="note-12">
    <h4><a href="/issues/2332#note-12" class="journal-link">#12</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-05-14" title="05/14/2014 04:42 PM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11298" class="journal has-details">
    <div id="note-13">
    <h4><a href="/issues/2332#note-13" class="journal-link">#13</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-06-11" title="06/11/2014 03:25 PM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Related to</strong> <i><a href="/issues/2771" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2771</a>: Merge nethserver-shorewall and nethserver-firewall-base</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11320" class="journal has-notes">
    <div id="note-14">
    <h4><a href="/issues/2332#note-14" class="journal-link">#14</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-06-12" title="06/12/2014 03:25 PM">about 7 years</a> ago</h4>

    <div class="wiki" id="journal-11320-notes"><p>Merged on master.</p></div>
    </div>
  </div>
  
  <div id="change-11326" class="journal has-notes has-details">
    <div id="note-15">
    <h4><a href="/issues/2332#note-15" class="journal-link">#15</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-06-12" title="06/12/2014 03:35 PM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-11326-notes">Packages in nethserver-testing:
	<ul>
	<li>nethserver-firewall-base-1.1.0-66.0git67ac1559.ns6.noarch.rpm</li>
		<li>nethserver-lsm-0.0.3-7.0gitd4a46e58.ns6.noarch.rpm</li>
		<li>nethserver-squid-1.1.1-3.0git37fbdd7c.ns6.noarch.rpm (gi su testing)</li>
		<li>nethserver-snort-0.0.1-5.0git32850266.ns6.noarch.rpm</li>
		<li>nethserver-base-2.2.1-57.0git27156ae2.ns6.noarch.rpm</li>
		<li>nethserver-nethgui-1.5.0-22.0git051080ae.ns6.noarch.rpm</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-11759" class="journal has-details">
    <div id="note-16">
    <h4><a href="/issues/2332#note-16" class="journal-link">#16</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-07-29" title="07/29/2014 05:47 AM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Davide Principi</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11764" class="journal has-details">
    <div id="note-17">
    <h4><a href="/issues/2332#note-17" class="journal-link">#17</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-07-29" title="07/29/2014 08:48 AM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Davide Principi</i> to <i>Filippo Carletti</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11766" class="journal has-notes has-details">
    <div id="note-18">
    <h4><a href="/issues/2332#note-18" class="journal-link">#18</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/8" class="user active">Filippo Carletti</a> <a href="/projects/nethserver/activity?from=2014-07-29" title="07/29/2014 04:20 PM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    <div class="wiki" id="journal-11766-notes"><p>I have verified both configuration modes: balance and  backup.<br />Tests:<br />routing is ok, traffic goes to both providers in balance and to highest weight link in active-backup<br />link failure disables failed link, traffic  switches to working link<br />connection is re-enabled after link recovery<br />manually disabling a link (shorewall disable ethX) works as expected<br />check ip auto discovery gets the right ip in all tested cases<br />online help is correct</p>


	<p>Not tested: 3 or more wan</p>


	<p>Remaining issue:<br /><a class="external" href="https://groups.google.com/forum/#!topic/nethserver/NGmP9D0BqqY">https://groups.google.com/forum/#!topic/nethserver/NGmP9D0BqqY</a></p>


	<p>I'd file a new issue about dhcp wan and failed link detection.</p></div>
    </div>
  </div>
  
  <div id="change-11768" class="journal has-details">
    <div id="note-19">
    <h4><a href="/issues/2332#note-19" class="journal-link">#19</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/8" class="user active">Filippo Carletti</a> <a href="/projects/nethserver/activity?from=2014-07-30" title="07/30/2014 04:38 AM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Copied to</strong> <i><a href="/issues/2827" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2827</a>: Firewall-base: multi-wan dhcp failover not supported</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11797" class="journal has-details">
    <div id="note-20">
    <h4><a href="/issues/2332#note-20" class="journal-link">#20</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/5" class="user active">Giacomo Sanchietti</a> <a href="/projects/nethserver/activity?from=2014-08-01" title="08/01/2014 03:01 AM">about 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Assignee</strong> deleted (<del><i>Filippo Carletti</i></del>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-11935" class="journal has-notes has-details">
    <div id="note-21">
    <h4><a href="/issues/2332#note-21" class="journal-link">#21</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />
    Updated by <a href="/users/9" class="user active">Davide Principi</a> <a href="/projects/nethserver/activity?from=2014-08-20" title="08/20/2014 06:01 AM">almost 7 years</a> ago</h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-11935-notes"><p>In nethserver-updates:<br />nethserver-firewall-base-2.0.0-1.ns6.noarch.rpm<br />nethserver-lsm-1.0.0-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>

<p class="other-formats">Also available in:  <span><a href="/issues/2332.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="/issues/2332.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>



<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright  2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
